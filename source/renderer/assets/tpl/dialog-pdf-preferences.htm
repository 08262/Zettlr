<div class="dialog">
    <h1>%i18n.preferences.pdf.title%</h1>
    <form action="" method="GET" id="dialog">
        <div id="prefs-tabs" class="clear">
            <ul>
                <li><a href="#prefs-tabs-general">%i18n.preferences.pdf.metadata%</a></li>
                <li><a href="#prefs-tabs-page">%i18n.preferences.pdf.page%</a></li>
                <li><a href="#prefs-tabs-font">%i18n.preferences.pdf.font%</a></li>
            </ul>
            <!-- Metadata for PDF files -->
            <div id="prefs-tabs-general">
                <p>%i18n.preferences.pdf.metadata_intro%</p>
                <label for="pdf.author">%i18n.preferences.pdf.author_label%</label>
                <input type="text" name="pdf.author" id="pdf.author" value="%PREFS_AUTHOR%" placeholder="%i18n.preferences.pdf.author%">
                <label for="pdf.keywords">%i18n.preferences.pdf.keywords_label%</label>
                <input type="text" name="pdf.keywords" if="pdf.keywords" value="%PREFS_KEYWORDS%" placeholder="%i18n.preferences.pdf.keywords%">
            </div>
            <!-- Page layout -->
            <div id="prefs-tabs-page">
                <p>%i18n.preferences.pdf.page_intro%</p>
                <hr>
                <div class="clear"></div>
                <div class="box-left">
                    <div class="paper a4paper">
                        <input class="tmargin" type="number" min="0" max="9999" step="0.1" name="pdf.tmargin" id="pdf.tmargin" value="%PREFS_TMARGIN%" placeholder="%i18n.preferences.pdf.tmargin%" data-tippy-content="%i18n.preferences.pdf.tmargin_label%">
                        <input class="rmargin" type="number" min="0" max="9999" step="0.1" name="pdf.rmargin" id="pdf.rmargin" value="%PREFS_RMARGIN%" placeholder="%i18n.preferences.pdf.rmargin%" data-tippy-content="%i18n.preferences.pdf.rmargin_label%">
                        <input class="bmargin" type="number" min="0" max="9999" step="0.1" name="pdf.bmargin" id="pdf.bmargin" value="%PREFS_BMARGIN%" placeholder="%i18n.preferences.pdf.bmargin%" data-tippy-content="%i18n.preferences.pdf.bmargin_label%">
                        <input class="lmargin" type="number" min="0" max="9999" step="0.1" name="pdf.lmargin" id="pdf.lmargin" value="%PREFS_LMARGIN%" placeholder="%i18n.preferences.pdf.lmargin%" data-tippy-content="%i18n.preferences.pdf.lmargin_label%">
                    </div>
                </div>
                <div class="box-right">
                    <label for="pdf.margin_unit">%i18n.preferences.pdf.unit_label%</label>
                    <select name="pdf.margin_unit" id="pdf.margin_-unit">
                        %MARGIN_UNITS%
                    </select>
                    <hr>
                    <label for="pdf.papertype">%i18n.preferences.pdf.papertype%</label>
                    <select name="pdf.papertype">
                        %PAPERTYPES%
                    </select>
                    <hr>
                    <label for="pdf.pagenumbering">%i18n.preferences.pdf.pagenumbering_label%</label>
                    <select name="pdf.pagenumbering">
                        %PAGENUMBERING%
                    </select>
                </div>
                <div class="clear"></div>
            </div>
            <!-- Font options -->
            <div id="prefs-tabs-font">
                <p>%i18n.preferences.pdf.font_intro%</p>
                <div class="box-left">
                    <label for="pdf.mainfont">%i18n.preferences.pdf.mainfont_label%</label>
                    <input type="text" name="pdf.mainfont" id="mainfont" value="%PREFS_MAINFONT%" placeholder="%i18n.preferences.pdf.mainfont%">
                    <label for="pdf.sansfont">%i18n.preferences.pdf.sansfont_label%</label>
                    <input type="text" name="pdf.sansfont" id="sansfont" value="%PREFS_SANSFONT%" placeholder="%i18n.preferences.pdf.sansfont%">
                    <label for="pdf.fontsize">%i18n.preferences.pdf.fontsize_label%</label>
                    <input type="number" min="0" max="10000" step="1" name="pdf.fontsize" id="fontsize" value="%PREFS_FONTSIZE%" placeholder="%i18n.preferences.pdf.fontsize%">
                    <label for="pdf.lineheight">%i18n.preferences.pdf.lineheight_label%</label>
                    <input type="number" min="0" max="1000" step="1" name="pdf.lineheight" id="lineheight" value="%PREFS_LINEHEIGHT%" placeholder="%i18n.preferences.pdf.lineheight%">
                </div>
                <div class="box-right">
                    <!-- This is the preview tab. It shows how everything will look afterwards. -->
                    <h1 class="pdf-preview">Lorem Ipsum Dolor</h1>
                    <p class="pdf-preview">
                        Lorem ipsum dolor sit amet, consectetur adipisici elit,
                        sed eiusmod tempor incidunt ut labore et dolore magna
                        aliqua. Ut enim ad minim veniam, quis nostrud
                        exercitation ullamco laboris nisi ut aliquid ex ea
                        commodi consequat. Quis aute iure reprehenderit in
                        voluptate velit esse cillum dolore eu fugiat nulla
                        pariatur. Excepteur sint obcaecat cupiditat non proident,
                        sunt in culpa qui officia deserunt mollit anim id est
                        laborum.
                    </p>
                </div>
            </div>
        </div>
        <div class="clearfix">
            <button type="submit" id="pref-save">%i18n.preferences.save%</button>
            <button id="abort">%i18n.preferences.cancel%</button>
            <span class="error-info"></span>
        </div>
    </form>
</div>
<script>
/* global $ */
// These scripts only are used to update the preview paragraph
$('#lineheight').change((e) => {
  $('p.pdf-preview').css('line-height', $(e.target).val() + '%')
})
$('#fontsize').change((e) => {
  // 1pt is approx. 1.333333 px
  $('p.pdf-preview').css('font-size', ($(e.target).val() * 1.3) + 'px')
})
$('#mainfont').change((e) => {
  $('p.pdf-preview').css('font-family', $(e.target).val())
})
$('#sansfont').change((e) => {
  $('h1.pdf-preview').css('font-family', $(e.target).val())
})

// Initial changing of CSS
$('p.pdf-preview').css('line-height', $('#lineheight').val() + '%')
$('p.pdf-preview').css('font-size', ($('#fontsize').val() * 1.3) + 'px')
$('p.pdf-preview').css('font-family', $('#mainfont').val())
$('h1.pdf-preview').css('font-family', $('#sansfont').val())
</script>
